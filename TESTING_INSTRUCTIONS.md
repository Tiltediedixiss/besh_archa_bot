# Инструкция по тестированию нового функционала

## Что тестировать

После обновления бота протестируйте следующий flow:

1. **Старт бота** → Приветствие от Арчи
2. **Приветствие от CEO** → Фото и текст директора
3. **Легенда** → 9 шагов легенды
4. **Современная история** → Фото и текст истории
5. **Финальное сообщение от Арчи** → Новый функционал!
6. **Стикер "Так держать!"** → Автоматически отправляется
7. **Предложение видеороликов** → Выбор языка или пропуск
8. **Переход к миссии** → Следующий этап

## Ключевые моменты для проверки

### ✅ Финальное сообщение от Арчи
- [ ] Текст соответствует требованиям
- [ ] Сообщение отправляется после современной истории
- [ ] Форматирование корректное

### ✅ Стикер "Так держать!"
- [ ] Стикер отправляется автоматически
- [ ] File ID корректный (замените на реальный)
- [ ] Fallback на эмодзи работает

### ✅ Предложение видеороликов
- [ ] Кнопки "Русский язык" и "Кыргызский язык"
- [ ] Кнопка "Пропустить"
- [ ] Ссылки на YouTube корректные
- [ ] Переход к следующему этапу работает

### ✅ Интеграция с существующим flow
- [ ] Переход к миссии работает
- [ ] Возврат в главное меню работает
- [ ] Все существующие функции работают

## Как получить file_id для стикера

1. Отправьте стикер "Так держать!" боту
2. Используйте команду `/get_file_id` (если есть)
3. Или добавьте временный обработчик:

```python
@dp.message_handler(content_types=['sticker'])
async def get_sticker_id(message: types.Message):
    await message.answer(f"File ID стикера: {message.sticker.file_id}")
```

4. Обновите `GOOD_JOB_STICKER_ID` в `data/files.py`

## Возможные проблемы и решения

### Проблема: Стикер не отправляется
**Решение:** Проверьте file_id в `data/files.py`

### Проблема: Кнопки не работают
**Решение:** Проверьте импорты в `handlers/modern_history.py`

### Проблема: Переход к миссии не работает
**Решение:** Убедитесь, что `mission.py` зарегистрирован в `main.py`

## Тестовые сценарии

### Сценарий 1: Полный flow
1. Запустите бота
2. Пройдите все этапы до современной истории
3. Проверьте финальное сообщение
4. Проверьте стикер
5. Выберите русский язык для видео
6. Перейдите к миссии

### Сценарий 2: Пропуск видео
1. Дойдите до предложения видео
2. Нажмите "Пропустить"
3. Убедитесь, что переход к миссии работает

### Сценарий 3: Возврат в меню
1. На любом этапе нажмите "Главное меню"
2. Убедитесь, что меню открывается корректно

## Логи для отладки

Включите логирование в `main.py`:
```python
logging.basicConfig(level=logging.DEBUG)
```

Это поможет увидеть все callback'и и обработчики. 